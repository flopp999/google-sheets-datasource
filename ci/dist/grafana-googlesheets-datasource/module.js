define(["react","@grafana/ui","@grafana/data","lodash","@grafana/runtime"],(function(e,t,n,r,a){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=9)}([function(t,n){t.exports=e},function(e,t,n){e.exports=n(7)()},function(e,n){e.exports=t},function(e,t){e.exports=n},function(e,t){e.exports=r},function(e,t){e.exports=a},function(e,t){e.exports=function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){if(e&&t){var n=Array.isArray(t)?t:t.split(","),r=e.name||"",a=e.type||"",o=a.replace(/\/.*$/,"");return n.some((function(e){var t=e.trim();return"."===t.charAt(0)?r.toLowerCase().endsWith(t.toLowerCase()):t.endsWith("/*")?o===t.replace(/\/.*$/,""):a===t}))}return!0}}])},function(e,t,n){"use strict";var r=n(8);function a(){}function o(){}o.resetWarningCache=a,e.exports=function(){function e(e,t,n,a,o,i){if(i!==r){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:a};return n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";n.r(t);var r=n(3),a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function o(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function l(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{c(r.next(e))}catch(e){o(e)}}function l(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}c((r=r.apply(e,t||[])).next())}))}function c(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=i.trys,(a=a.length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}function u(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)i.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return i}var s=function(e){function t(t){return e.call(this,t)||this}return o(t,e),t.prototype.getSpreadSheets=function(){return l(this,void 0,void 0,(function(){return c(this,(function(e){return[2,this.getResource("spreadsheets").then((function(e){var t=e.spreadsheets;return t?Object.entries(t).map((function(e){var t=u(e,2),n=t[0];return{label:t[1],value:n}})):[]}))]}))}))},t}(n(5).DataSourceWithBackend),f=n(0),p=n.n(f),d=n(2);function g(e){var t,n=null===(t=e)||void 0===t?void 0:t.indexOf("/d/");if(!n)return{spreadsheet:e};var r=e.substring(n+3);return(n=r.indexOf("/"))&&(r=r.substring(0,n)),(n=e.indexOf("range="))>0?{spreadsheet:r,range:e.substring(n+"range=".length)}:{spreadsheet:r}}var m,h=function(e){return void 0===e&&(e=300),e<60?e+"s":e<3600?e/60+"m":e/3600+"h"},v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onRangeChange=function(e){t.props.onChange(i(i({},t.props.query),{range:e.target.value}))},t.onSpreadsheetIDChange=function(e){var n=t.props,r=n.query,a=n.onRunQuery,o=n.onChange;if(e.value){var l=e.value;/(.*)\/spreadsheets\/d\/(.*)/.test(l)?o(i(i({},r),g(l))):o(i(i({},r),{spreadsheet:l})),a()}},t.toggleUseTimeFilter=function(e){var n=t.props,r=n.query,a=n.onChange,o=n.onRunQuery;a(i(i({},r),{useTimeFilter:!r.useTimeFilter})),o()},t}return o(t,e),t.prototype.componentWillMount=function(){this.props.query.hasOwnProperty("cacheDurationSeconds")||(this.props.query.cacheDurationSeconds=300)},t.prototype.render=function(){var e,t,n=this.props,r=n.query,a=n.onRunQuery,o=n.onChange,l=n.datasource;return p.a.createElement(p.a.Fragment,null,p.a.createElement("div",{className:"gf-form-inline"},p.a.createElement(d.FormLabel,{width:10,className:"query-keyword",tooltip:p.a.createElement("p",null,"The ",p.a.createElement("code",null,"spreadsheetId"),' is used to identify which spreadsheet is to be accessed or altered. This ID is the value between the "/d/" and the "/edit" in the URL of your spreadsheet.')},"Spreadsheet ID"),p.a.createElement(d.SegmentAsync,{loadOptions:function(){return l.getSpreadSheets()},placeholder:"Enter SpreadsheetID",value:r.spreadsheet,allowCustomValue:!0,onChange:this.onSpreadsheetIDChange}),p.a.createElement(d.LinkButton,{style:{marginTop:1},disabled:!r.spreadsheet,variant:"link",icon:"fa fa-external-link",href:(e=r,t="https://docs.google.com/spreadsheets/d/"+e.spreadsheet+"/view",e.range&&(t+="#range="+e.range),t),target:"_blank"}),p.a.createElement("div",{className:"gf-form gf-form--grow"},p.a.createElement("div",{className:"gf-form-label gf-form-label--grow"}))),p.a.createElement("div",{className:"gf-form-inline"},p.a.createElement(d.FormLabel,{width:10,className:"query-keyword",tooltip:p.a.createElement("p",null,"A string like ",p.a.createElement("code",null,"Sheet1!A1:B2"),", that refers to a group of cells in the spreadsheet, and is typically used in formulas.Named ranges are also supported. When a named range conflicts with a sheet's name, the named range is preferred.")},"Range"),p.a.createElement("input",{className:"gf-form-input width-14",value:r.range||"",placeholder:"ie: Class Data!A2:E",onChange:this.onRangeChange,onBlur:a}),p.a.createElement("div",{className:"gf-form gf-form--grow"},p.a.createElement("div",{className:"gf-form-label gf-form-label--grow"}))),p.a.createElement("div",{className:"gf-form-inline"},p.a.createElement(d.FormLabel,{width:10,className:"query-keyword",tooltip:"Time in seconds that the spreadsheet will be cached in Grafana after receiving a response from the spreadsheet API"},"Cache Time"),p.a.createElement(d.Segment,{value:{label:h(r.cacheDurationSeconds),value:r.cacheDurationSeconds},options:[0,5,10,30,60,120,300,600,1800,3600,7200,18e3].map((function(e){return{label:h(e),value:e,description:e?"":"Response is not cached at all"}})),onChange:function(e){var t=e.value;return o(i(i({},r),{cacheDurationSeconds:t}))}}),p.a.createElement("div",{className:"gf-form gf-form--grow"},p.a.createElement("div",{className:"gf-form-label gf-form-label--grow"}))),p.a.createElement("div",{className:"gf-form-inline"},p.a.createElement(d.Switch,{label:"Use Time Filter",tooltip:"Apply the dashboard time range to the first time field",labelClass:"width-10  query-keyword",checked:!0===r.useTimeFilter,onChange:this.toggleUseTimeFilter}),p.a.createElement("div",{className:"gf-form gf-form--grow"},p.a.createElement("div",{className:"gf-form-label gf-form-label--grow"}))))},t}(f.PureComponent);!function(e){e.JWT="jwt",e.KEY="key"}(m||(m={}));var y=[{label:"API Key",value:m.KEY},{label:"Google JWT File",value:m.JWT}],b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onResetApiKey=function(){var e=t.props.options;t.props.onOptionsChange(i(i({},e),{secureJsonData:i(i({},e.secureJsonData),{apiKey:""}),secureJsonFields:i(i({},e.secureJsonFields),{apiKey:!1})}))},t}return o(t,e),t.prototype.componentWillMount=function(){this.props.options.jsonData.hasOwnProperty("authType")||(this.props.options.jsonData.authType=m.KEY)},t.prototype.render=function(){var e,t=this.props,n=t.options,a=t.onOptionsChange,o=n.secureJsonFields,l=n.jsonData,c=n.secureJsonData;return p.a.createElement("div",{className:"gf-form-group"},p.a.createElement("div",{className:"gf-form"},p.a.createElement(d.FormLabel,{className:"width-10"},"Auth"),p.a.createElement(d.Select,{className:"width-30",value:y.find((function(e){return e.value===l.authType}))||y[0],options:y,defaultValue:n.jsonData.authType,onChange:Object(r.onUpdateDatasourceJsonDataOptionSelect)(this.props,"authType")})),l.authType===m.KEY&&p.a.createElement(p.a.Fragment,null,p.a.createElement("div",{className:"gf-form"},p.a.createElement(d.SecretFormField,{isConfigured:o&&o.apiKey,value:(null===(e=c)||void 0===e?void 0:e.apiKey)||"",label:"API Key",labelWidth:10,inputWidth:30,placeholder:"Enter API Key",onReset:this.onResetApiKey,onChange:Object(r.onUpdateDatasourceSecureJsonDataOption)(this.props,"apiKey")}))),l.authType===m.JWT&&p.a.createElement(D,{isConfigured:o&&!!o.jwt,onChange:function(e){a(i(i({},n),{secureJsonData:i(i({},c),{jwt:e})}))}}),p.a.createElement("div",{className:"grafana-info-box",style:{marginTop:24}},l.authType===m.JWT?p.a.createElement(p.a.Fragment,null,p.a.createElement("h4",null,"Generate a JWT file"),p.a.createElement("ol",{style:{listStylePosition:"inside"}},p.a.createElement("li",null,"Open the ",p.a.createElement("a",{href:"https://console.developers.google.com/apis/credentials"},"Credentials")," page in the Google API Console."),p.a.createElement("li",null,"Click ",p.a.createElement("strong",null,"Create Credentials")," then click ",p.a.createElement("strong",null,"Service account"),"."),p.a.createElement("li",null,"On the Create service account page, enter the Service account details."),p.a.createElement("li",null,"On the ",p.a.createElement("code",null,"Create service account")," page, fill in the ",p.a.createElement("code",null,"Service account details")," and then click ",p.a.createElement("code",null,"Create")),p.a.createElement("li",null,"On the ",p.a.createElement("code",null,"Service account permissions")," page, don't add a role to the service account. Just click ",p.a.createElement("code",null,"Continue")),p.a.createElement("li",null,"In the next step, click ",p.a.createElement("code",null,"Create Key"),". Choose key type ",p.a.createElement("code",null,"JSON")," and click ",p.a.createElement("code",null,"Create"),". A JSON key file will be created and downloaded to your computer"),p.a.createElement("li",null,"Open the ",p.a.createElement("a",{href:"https://console.cloud.google.com/apis/library/sheets.googleapis.com?q=sheet"},"Google Sheets")," in API Library and enable access for your account"),p.a.createElement("li",null,"Open the ",p.a.createElement("a",{href:"https://console.cloud.google.com/apis/library/drive.googleapis.com?q=drive"},"Google Drive")," in API Library and enable access for your account. Access to the Google Drive API is used to list all spreadsheets that you have access to."),p.a.createElement("li",null,"Drag the file to the dotted zone above. Then click ",p.a.createElement("code",null,"Save & Test"),". The file contents will be encrypted and saved in the Grafana database."))):p.a.createElement(p.a.Fragment,null,p.a.createElement("h4",null,"Generate an API key"),p.a.createElement("ol",{style:{listStylePosition:"inside"}},p.a.createElement("li",null,"Open the ",p.a.createElement("a",{href:"https://console.developers.google.com/apis/credentials"},"Credentials page")," in the Google API Console."),p.a.createElement("li",null,"Click ",p.a.createElement("strong",null,"Create Credentials")," and then click ",p.a.createElement("strong",null,"API key"),"."),p.a.createElement("li",null,"Copy the key and paste it in the API Key field above. The file contents are encrypted and saved in the Grafana database.")))))},t}(f.PureComponent),E=n(4),O=["type","project_id","private_key_id","private_key","client_email","client_id","auth_uri","token_uri","auth_provider_x509_cert_url","client_x509_cert_url"];function D(e){var t=e.onChange,n=e.isConfigured,r=u(Object(f.useState)(!n),2),a=r[0],o=r[1],i=u(Object(f.useState)(),2),l=i[0],c=i[1];return a?p.a.createElement(p.a.Fragment,null,p.a.createElement(pe,{baseStyle:{marginTop:"24px"},accept:"application/json",onDrop:function(e){var n=new FileReader;1===e.length?(n.onloadend=function(e){!function(e){return Object(E.isObject)(e)&&O.every((function(t){return!!e[t]}))}(JSON.parse(e.target.result))?c("Invalid JWT file"):(t(e.target.result),o(!1))},n.readAsText(e[0])):e.length>1&&c("You can only upload one file")}},p.a.createElement("p",{style:{margin:0,fontSize:18}},"Drop the file here, or click to use the file explorer")),l&&p.a.createElement("pre",{style:{margin:"12px 0 0"},className:"gf-form-pre alert alert-error"},l)):p.a.createElement(p.a.Fragment,null,O.map((function(e){return p.a.createElement("div",{className:"gf-form"},p.a.createElement(d.FormLabel,{width:10},Object(E.startCase)(e)),p.a.createElement("input",{disabled:!0,className:"gf-form-input width-30",value:"configured"}))})),p.a.createElement(d.Button,{style:{marginTop:12},variant:"secondary",onClick:function(){return o(!0)}},"Upload another JWT file"))}var w=n(1),j=n.n(w),C=new Map([["avi","video/avi"],["gif","image/gif"],["ico","image/x-icon"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["mkv","video/x-matroska"],["mov","video/quicktime"],["mp4","video/mp4"],["pdf","application/pdf"],["png","image/png"],["zip","application/zip"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"]]);function S(e,t){var n=function(e){var t=e.name;if(t&&-1!==t.lastIndexOf(".")&&!e.type){var n=t.split(".").pop().toLowerCase(),r=C.get(n);r&&Object.defineProperty(e,"type",{value:r,writable:!1,configurable:!1,enumerable:!0})}return e}(e);if("string"!=typeof n.path){var r=e.webkitRelativePath;Object.defineProperty(n,"path",{value:"string"==typeof t?t:"string"==typeof r&&r.length>0?r:e.name,writable:!1,configurable:!1,enumerable:!0})}return n}var P=[".DS_Store","Thumbs.db"];function k(e){return l(this,void 0,void 0,(function(){return c(this,(function(t){return[2,(n=e,n.dataTransfer&&e.dataTransfer?T(e.dataTransfer,e.type):F(e))];var n}))}))}function F(e){return(null!==e.target&&e.target.files?A(e.target.files):[]).map((function(e){return S(e)}))}function T(e,t){return l(this,void 0,void 0,(function(){var n;return c(this,(function(r){switch(r.label){case 0:return e.items?(n=A(e.items).filter((function(e){return"file"===e.kind})),"drop"!==t?[2,n]:[4,Promise.all(n.map(_))]):[3,2];case 1:return[2,x(I(r.sent()))];case 2:return[2,x(A(e.files).map((function(e){return S(e)})))]}}))}))}function x(e){return e.filter((function(e){return-1===P.indexOf(e.name)}))}function A(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];t.push(r)}return t}function _(e){if("function"!=typeof e.webkitGetAsEntry)return R(e);var t=e.webkitGetAsEntry();return t&&t.isDirectory?K(t):R(e)}function I(e){return e.reduce((function(e,t){return function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(u(arguments[t]));return e}(e,Array.isArray(t)?I(t):[t])}),[])}function R(e){var t=e.getAsFile();if(!t)return Promise.reject(e+" is not a File");var n=S(t);return Promise.resolve(n)}function N(e){return l(this,void 0,void 0,(function(){return c(this,(function(t){return[2,e.isDirectory?K(e):L(e)]}))}))}function K(e){var t=e.createReader();return new Promise((function(e,n){var r=[];!function a(){var o=this;t.readEntries((function(t){return l(o,void 0,void 0,(function(){var o,i,l;return c(this,(function(c){switch(c.label){case 0:if(t.length)return[3,5];c.label=1;case 1:return c.trys.push([1,3,,4]),[4,Promise.all(r)];case 2:return o=c.sent(),e(o),[3,4];case 3:return i=c.sent(),n(i),[3,4];case 4:return[3,6];case 5:l=Promise.all(t.map(N)),r.push(l),a(),c.label=6;case 6:return[2]}}))}))}),(function(e){n(e)}))}()}))}function L(e){return l(this,void 0,void 0,(function(){return c(this,(function(t){return[2,new Promise((function(t,n){e.file((function(n){var r=S(n,e.fullPath);t(r)}),(function(e){n(e)}))}))]}))}))}var J=n(6),W=n.n(J);function z(e,t){return"application/x-moz-file"===e.type||W()(e,t)}function q(e,t,n){if(G(e.size)){if(G(t)&&G(n))return e.size>=t&&e.size<=n;if(G(t))return e.size>=t;if(G(n))return e.size<=n}return!0}function G(e){return null!=e}function M(e,t,n,r){return e.every((function(e){return z(e,t)&&q(e,n,r)}))}function B(e){return"function"==typeof e.isPropagationStopped?e.isPropagationStopped():void 0!==e.cancelBubble&&e.cancelBubble}function U(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,(function(e){return"Files"===e||"application/x-moz-file"===e})):!!e.target&&!!e.target.files}function Y(e){e.preventDefault()}function Q(e){return-1!==e.indexOf("MSIE")||-1!==e.indexOf("Trident/")}function V(e){return-1!==e.indexOf("Edge/")}function H(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.navigator.userAgent;return Q(e)||V(e)}function $(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return t.some((function(t){return!B(e)&&t&&t.apply(void 0,[e].concat(r)),B(e)}))}}function X(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ee(n,!0).forEach((function(t){ne(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ee(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ne(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function re(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var ae=Object(f.forwardRef)((function(e,t){var n=e.children,r=ie(re(e,["children"])),a=r.open,o=re(r,["open"]);return Object(f.useImperativeHandle)(t,(function(){return{open:a}}),[a]),p.a.createElement(f.Fragment,null,n(te({},o,{open:a})))}));ae.displayName="Dropzone",ae.propTypes={children:j.a.func,accept:j.a.oneOfType([j.a.string,j.a.arrayOf(j.a.string)]),multiple:j.a.bool,preventDropOnDocument:j.a.bool,noClick:j.a.bool,noKeyboard:j.a.bool,noDrag:j.a.bool,noDragEventsBubbling:j.a.bool,minSize:j.a.number,maxSize:j.a.number,disabled:j.a.bool,getFilesFromEvent:j.a.func,onFileDialogCancel:j.a.func,onDragEnter:j.a.func,onDragLeave:j.a.func,onDragOver:j.a.func,onDrop:j.a.func,onDropAccepted:j.a.func,onDropRejected:j.a.func};var oe={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,draggedFiles:[],acceptedFiles:[],rejectedFiles:[]};function ie(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.accept,n=e.disabled,r=void 0!==n&&n,a=e.getFilesFromEvent,o=void 0===a?k:a,i=e.maxSize,l=void 0===i?1/0:i,c=e.minSize,u=void 0===c?0:c,s=e.multiple,p=void 0===s||s,d=e.onDragEnter,g=e.onDragLeave,m=e.onDragOver,h=e.onDrop,v=e.onDropAccepted,y=e.onDropRejected,b=e.onFileDialogCancel,E=e.preventDropOnDocument,O=void 0===E||E,D=e.noClick,w=void 0!==D&&D,j=e.noKeyboard,C=void 0!==j&&j,S=e.noDrag,P=void 0!==S&&S,F=e.noDragEventsBubbling,T=void 0!==F&&F,x=Object(f.useRef)(null),A=Object(f.useRef)(null),_=Object(f.useReducer)(le,oe),I=Z(_,2),R=I[0],N=I[1],K=R.isFocused,L=R.isFileDialogActive,J=R.draggedFiles,W=Object(f.useCallback)((function(){A.current&&(N({type:"openDialog"}),A.current.value=null,A.current.click())}),[N]),G=function(){L&&setTimeout((function(){A.current&&(A.current.files.length||(N({type:"closeDialog"}),"function"==typeof b&&b()))}),300)};Object(f.useEffect)((function(){return window.addEventListener("focus",G,!1),function(){window.removeEventListener("focus",G,!1)}}),[A,L,b]);var Q=Object(f.useCallback)((function(e){x.current&&x.current.isEqualNode(e.target)&&(32!==e.keyCode&&13!==e.keyCode||(e.preventDefault(),W()))}),[x,A]),V=Object(f.useCallback)((function(){N({type:"focus"})}),[]),ee=Object(f.useCallback)((function(){N({type:"blur"})}),[]),ae=Object(f.useCallback)((function(){w||(H()?setTimeout(W,0):W())}),[A,w]),ie=Object(f.useRef)([]),ce=function(e){x.current&&x.current.contains(e.target)||(e.preventDefault(),ie.current=[])};Object(f.useEffect)((function(){return O&&(document.addEventListener("dragover",Y,!1),document.addEventListener("drop",ce,!1)),function(){O&&(document.removeEventListener("dragover",Y),document.removeEventListener("drop",ce))}}),[x,O]);var ue=Object(f.useCallback)((function(e){e.preventDefault(),e.persist(),he(e),-1===ie.current.indexOf(e.target)&&(ie.current=[].concat(X(ie.current),[e.target])),U(e)&&Promise.resolve(o(e)).then((function(t){B(e)&&!T||(N({draggedFiles:t,isDragActive:!0,type:"setDraggedFiles"}),d&&d(e))}))}),[o,d,T]),se=Object(f.useCallback)((function(e){if(e.preventDefault(),e.persist(),he(e),e.dataTransfer)try{e.dataTransfer.dropEffect="copy"}catch(e){}return U(e)&&m&&m(e),!1}),[m,T]),fe=Object(f.useCallback)((function(e){e.preventDefault(),e.persist(),he(e);var t=ie.current.filter((function(t){return t!==e.target&&x.current&&x.current.contains(t)}));ie.current=t,t.length>0||(N({isDragActive:!1,type:"setDraggedFiles",draggedFiles:[]}),U(e)&&g&&g(e))}),[x,g,T]),pe=Object(f.useCallback)((function(e){e.preventDefault(),e.persist(),he(e),ie.current=[],N({type:"reset"}),U(e)&&Promise.resolve(o(e)).then((function(n){if(!B(e)||T){var r=[],a=[];n.forEach((function(e){z(e,t)&&q(e,u,l)?r.push(e):a.push(e)})),!p&&r.length>1&&a.push.apply(a,X(r.splice(0))),N({acceptedFiles:r,rejectedFiles:a,type:"setFiles"}),h&&h(r,a,e),a.length>0&&y&&y(a,e),r.length>0&&v&&v(r,e)}}))}),[p,t,u,l,o,h,v,y,T]),de=function(e){return r?null:e},ge=function(e){return C?null:de(e)},me=function(e){return P?null:de(e)},he=function(e){T&&e.stopPropagation()},ve=Object(f.useMemo)((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refKey,n=void 0===t?"ref":t,a=e.onKeyDown,o=e.onFocus,i=e.onBlur,l=e.onClick,c=e.onDragEnter,u=e.onDragOver,s=e.onDragLeave,f=e.onDrop,p=re(e,["refKey","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"]);return te(ne({onKeyDown:ge($(a,Q)),onFocus:ge($(o,V)),onBlur:ge($(i,ee)),onClick:de($(l,ae)),onDragEnter:me($(c,ue)),onDragOver:me($(u,se)),onDragLeave:me($(s,fe)),onDrop:me($(f,pe))},n,x),r||C?{}:{tabIndex:0},{},p)}}),[x,Q,V,ee,ae,ue,se,fe,pe,C,P,r]),ye=Object(f.useCallback)((function(e){e.stopPropagation()}),[]),be=Object(f.useMemo)((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.refKey,r=void 0===n?"ref":n,a=e.onChange,o=e.onClick,i=re(e,["refKey","onChange","onClick"]),l=ne({accept:t,multiple:p,type:"file",style:{display:"none"},onChange:de($(a,pe)),onClick:de($(o,ye)),autoComplete:"off",tabIndex:-1},r,A);return te({},l,{},i)}}),[A,t,p,pe,r]),Ee=J.length,Oe=p||Ee<=1,De=Ee>0&&M(J,t,u,l),we=Ee>0&&(!De||!Oe);return te({},R,{isDragAccept:De,isDragReject:we,isFocused:K&&!r,getRootProps:ve,getInputProps:be,rootRef:x,inputRef:A,open:de(W)})}function le(e,t){switch(t.type){case"focus":return te({},e,{isFocused:!0});case"blur":return te({},e,{isFocused:!1});case"openDialog":return te({},e,{isFileDialogActive:!0});case"closeDialog":return te({},e,{isFileDialogActive:!1});case"setDraggedFiles":var n=t.isDragActive;return te({},e,{draggedFiles:t.draggedFiles,isDragActive:n});case"setFiles":return te({},e,{acceptedFiles:t.acceptedFiles,rejectedFiles:t.rejectedFiles});case"reset":return te({},e,{isFileDialogActive:!1,isDragActive:!1,draggedFiles:[]});default:return e}}var ce={display:"flex",justifyContent:"center",alignItems:"center",height:"150px",backgroundColor:"#212327",padding:24,borderWidth:2,borderRadius:2,borderColor:"#808080",borderStyle:"dashed",outline:"none",transition:"border .24s ease-in-out"},ue={borderColor:"#2196f3"},se={borderColor:"#EF843C"},fe={borderColor:"#E24D42"};function pe(e){var t=e.children,n=e.baseStyle,r=void 0===n?{}:n,a=e.activeStyle,o=void 0===a?{}:a,l=e.acceptStyle,c=void 0===l?{}:l,u=e.rejectStyle,s=void 0===u?{}:u,d=ie(function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}(e,["children","baseStyle","activeStyle","acceptStyle","rejectStyle"])),g=d.getRootProps,m=d.getInputProps,h=d.isDragActive,v=d.isDragAccept,y=d.isDragReject,b=Object(f.useMemo)((function(){return i(i(i(i(i({},ce),r),h?i(i({},ue),o):{}),v?i(i({},se),c):{}),y?i(i({},fe),s):{})}),[h,y]);return p.a.createElement("div",i({},g({style:b})),p.a.createElement("input",i({},m())),t)}var de=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={index:0},t.renderInfo=function(e){var t,n=null===(t=e.meta)||void 0===t?void 0:t.custom;return n?p.a.createElement("div",null,p.a.createElement("h3",null,"Info"),p.a.createElement("pre",null,JSON.stringify(n,null,2))):null},t}return o(t,e),t.prototype.render=function(){var e=this,t=this.props.data;return t&&t.length?p.a.createElement("div",null,p.a.createElement("h3",null,"Google Sheets Metadata"),t.map((function(t){return e.renderInfo(t)}))):p.a.createElement("div",null,"No Data")},t}(f.PureComponent);n.d(t,"plugin",(function(){return ge}));var ge=new r.DataSourcePlugin(s).setConfigEditor(b).setQueryEditor(v).setMetadataInspector(de)}])}));
//# sourceMappingURL=module.js.map